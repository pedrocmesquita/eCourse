@startuml
actor Manager as Actor
Actor -> CreateCourseUI : doShow
activate CreateCourseUI
CreateCourseUI -> CreateCourseController : createCourse
activate CreateCourseController
CreateCourseController -> AuthorizationService : ensureAuthenticatedUserHasAnyOf
activate AuthorizationService
AuthorizationService --> CreateCourseController
deactivate AuthorizationService
CreateCourseController -> CourseBuilder : withName
activate CourseBuilder
create Name
CourseBuilder -> Name : new
activate Name
Name -> Name : setName
activate Name
Name -> StringPredicates : isNullOrEmpty
activate StringPredicates
StringPredicates --> Name
deactivate StringPredicates
Name --> Name
deactivate Name
Name --> CourseBuilder
deactivate Name
CourseBuilder --> CreateCourseController
deactivate CourseBuilder
CreateCourseController -> CourseBuilder : withDescription
activate CourseBuilder
create Description
CourseBuilder -> Description : new
activate Description
Description -> Description : setDescription
activate Description
Description -> StringPredicates : isNullOrEmpty
activate StringPredicates
StringPredicates --> Description
deactivate StringPredicates
Description -> Application : settings
activate Application
Application --> Description
deactivate Application
Description -> AppSettings : getCourseDescriptionCharacterLimit
activate AppSettings
AppSettings -> Properties : getProperty
activate Properties
Properties --> AppSettings
deactivate Properties
AppSettings --> Description
deactivate AppSettings
Description --> Description
deactivate Description
Description --> CourseBuilder
deactivate Description
CourseBuilder --> CreateCourseController
deactivate CourseBuilder
opt
CreateCourseController -> CourseBuilder : withEnrollLimit
activate CourseBuilder
create EnrollLimit
CourseBuilder -> EnrollLimit : new
activate EnrollLimit
EnrollLimit -> EnrollLimit : setEnrollLimit
activate EnrollLimit
EnrollLimit -> EnrollLimit : setMinEnroll
activate EnrollLimit
EnrollLimit -> Preconditions : nonNegative
activate Preconditions
Preconditions --> EnrollLimit
deactivate Preconditions
EnrollLimit --> EnrollLimit
deactivate EnrollLimit
EnrollLimit -> EnrollLimit : setMaxEnroll
activate EnrollLimit
EnrollLimit -> Preconditions : nonNegative
activate Preconditions
Preconditions --> EnrollLimit
deactivate Preconditions
EnrollLimit --> EnrollLimit
deactivate EnrollLimit
EnrollLimit --> EnrollLimit
deactivate EnrollLimit
EnrollLimit --> CourseBuilder
deactivate EnrollLimit
CourseBuilder --> CreateCourseController
deactivate CourseBuilder
end
CreateCourseController -> CourseBuilder : build
activate CourseBuilder
create Course
CourseBuilder -> Course : new
activate Course
Course -> Preconditions : noneNull
activate Preconditions
Preconditions --> Course
deactivate Preconditions
Course --> CourseBuilder
deactivate Course
CourseBuilder --> CreateCourseController
deactivate CourseBuilder
CreateCourseController -> DomainRepository : save
activate DomainRepository
database Database
DomainRepository -> Database : save
activate Database
Database --> DomainRepository
deactivate Database
DomainRepository --> CreateCourseController
deactivate DomainRepository
CreateCourseController --> CreateCourseUI
deactivate CreateCourseController
return
@enduml